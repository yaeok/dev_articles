---
title: "レイアウトを整えよう"
free: false
---

## はじめに
前章で作成したプロジェクトをvscodeで立ち上げましょう。
新規作成されたプロジェクトを実行して、初期状態を確認しましょう。
vscodeのターミナルから書きコマンドを実行しましょう。
```
npm run dev
```

chromeを開いて、`localhost:3000`で画面を確認しましょう。
初期プロジェクトの状態では以下のような画面になっていると思います。
![](https://storage.googleapis.com/zenn-user-upload/05fe68c6aa0a-20230705.png)

## ファイルの初期化
先ほどの画面を構成しているコードを全て削除してレイアウトとトップ画面を実装していきます。
画面レイアウトは下記の要素をコンポーネントとして実装していきます。
- header
- main
- footer

それではまずは、初期化していきましょう。
appフォルダの中身を下記のようなファイル構成に修正していきます。
- favicon.ico (デフォルト）
- global.module.css （中身は全て削除）
- page.tsx
- layout.tsx

```typescript:page.tsx
export default function HomeScreen() {
  return (
    <>
      <p>トップ画面</p>
    </>
  )
}
```

```typescript:layout.tsx
import styles from '@/app/global.module.css'

export const metadata = {
  title: 'chat-app',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang='ja'>
      <body>{children}</body>
    </html>
  )
}
```

一旦このようなファイル構成にして、画面を確認してみましょう。
![](https://storage.googleapis.com/zenn-user-upload/9b4f6f8af494-20230705.png)

「トップ画面」という文字が出力されたらOKです。

## chakra-uiをインストール
レイアウトを整える上で、必要なパッケージをインストールします。
この時点で、chakra-iconまでインストールしましょう。
vscodeのターミナルから下記の2つのコマンドをそれぞれ実行します。
```
npm i @chakra-ui/react @emotion/react @emotion/styled framer-motion
npm i @chakra-ui/icons
```

プロジェクト全体でchakra-uiを使用できるように、設定していきます。
`src/common/design`フォルダを作成します。直下に`index.tsx`を作成します。
```typescript:index.tsx
'use client'
export * from '@chakra-ui/react'
export * from '@chakra-ui/icons'
```

また、`chakra-ui`は`ChakraProvider`で全体をラップしてあげないといけません。
`src/common/providers`フォルダを作成し、直下に`chakra_provider.tsx`ファイルを作成します。
```typescript:chakra_provider.tsx
'use client'

import { ChakraProvider } from '@chakra-ui/react'

export default function Provider({ children }: { children: React.ReactNode }) {
  return <ChakraProvider>{children}</ChakraProvider>
}
```

さらに、上記のProviderを`layout.tsx`内でラップしてあげます。

```typescript:layout.tsx
import styles from '@/app/global.module.css'
import Provider from '@/common/providers/chakra_provider'

export const metadata = {
  title: 'chat-app',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang='ja'>
      <body className={styles.body}>
        <Provider>{children}</Provider>
      </body>
    </html>
  )
}
```

これで、chakra-uiをプロジェクト全体で使用できるようになりました。

## レイアウトの実装
それでは、chakra-uiが使えるようになったので、レイアウトを整えていきます。

`src/common/components`フォルダを作成します。
フォルダ直下に3つのコンポーネントをそれぞれ作成します。
- header.component.tsx
- footer.component.tsx
- main.component.tsx

```typescript:header.component.tsx
'use client'
import NextLink from 'next/link'

import { Box, Flex, Heading } from '@/common/design'

export default function Header() {
  return (
    <Box as='header' position='sticky' top='0' zIndex='docked'>
      <Flex
        bg='white'
        color='gray.600'
        minH='60px'
        py={{ base: 2 }}
        px={{ base: 4 }}
        borderBottom={1}
        borderStyle='solid'
        borderColor='gray.200'
        align='center'
      >
        <Flex flex={1} justify='start' maxW='5xl' mx='auto'>
          <Heading as='h1' size='lg'>
            <NextLink href='/home'>chat-app</NextLink>
          </Heading>
        </Flex>
      </Flex>
    </Box>
  )
}
```

```typescript:footer.component.tsx
'use client'

import { Box, Button, Container, Flex, Text } from '@/common/design'

export default function Footer() {
  return (
    <Box bg='gray.50' color='gray.700' as='footer'>
      <Container maxW='5xl' py={4}>
        <Flex justify='space-between' align='center'>
          <Text as='small'>© 2023 chat-app</Text>
          <Box>
            <Button>お問い合わせ</Button>
            <Button>利用規約</Button>
          </Box>
        </Flex>
      </Container>
    </Box>
  )
}
```

```typescript:main.component.tsx
'use client'
import { Container } from '@/common/design'

export default function Main({ children }: { children: React.ReactNode }) {
  return (
    <Container
      as='main'
      maxW='container.lg'
      my='2'
      minH='calc(100vh - 115px - 2rem)'
    >
      {children}
    </Container>
  )
}
```

作成したコンポーネントを`layout.tsx`に反映させます。

```typescript:layout.tsx
import styles from '@/app/global.module.css'
import Footer from '@/common/components/footer.component'
import Header from '@/common/components/header.component'
import Main from '@/common/components/main.component'
import Provider from '@/common/providers/chakra_provider'

export const metadata = {
  title: 'chat-app',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang='ja'>
      <body className={styles.body}>
        <Provider>
          <Header />
          <Main>{children}</Main>
          <Footer />
        </Provider>
      </body>
    </html>
  )
}
```
この状態で画面を確認してみましょう。
ヘッダー、フッターが設置されていて、レイアウトに反映されていることがわかります。
![](https://storage.googleapis.com/zenn-user-upload/e8d85162959c-20230705.png)

次の章では、Login画面を実装していきます。