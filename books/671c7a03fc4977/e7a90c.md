---
title: "Chat送信機能を実装"
free: false
---

## はじめに
この章から、実際にチャットを送信できる機能の実装にはいっていきます。
流れとしては、画面の作成、Firestoreへの格納になります。
この章では、まだ画面にチャットの内容が表示されるわけではないので、登録されているかわかりにくいので、Firestoreのデータに登録ができているかを直接確認してください。

## チャット画面の実装
`app/chat/[chatId]`直下にある`page.tsx`にチャット画面を実装していきます。
今回のチャットアプリはパソコンでもスマホでも使用することができますが、UIはスマホによせて実装しようかと思います。
はじめからある程度のレスポンシブは気にしていたので、あまり影響はないとおもいますが、スマホで見たほうがきれいというだけです・・。
```typescript: app/chat/[chatId]/page.tsx
```
上にチャットした内容が並んで、下に配置されたフォームでメッセージを送信するような画面です。
画面がある程度できたので、チャットを送信する処理を追加していきます。
```typescript: lib/chat/message.ts
```

これでメッセージをFirestoreに格納する処理ができました。
メッセージは今回チャットのdocument直下に`messages`という名前のcollectionで管理します。
fieldには、メッセージの内容、誰が送ったか、いつ送ったかの3つの要素を保持します。

Firestoreにメッセージが登録されているか確認してみましょう。

登録されていることが確認できました。次はメッセージを表示させていきます。