---
title: "ã€ä¸­ç·¨ã€‘Next.jsã§ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚’å®Ÿè£…ã™ã‚‹ ã€œfirebase authenticationç·¨ã€œ"
emoji: "ğŸ—‚"
type: "tech"
topics: []
published: true
published_at: "2023-09-04 09:30"
---

# æ¦‚è¦
å‰ç·¨ã«å¼•ãç¶šãã€Next.jsã®ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã«ã¤ã„ã¦ä¸­ç·¨ã§ã™ï¼
ä»Šå›ã¯ã€firebaseã®åˆæœŸè¨­å®šã‚’ã—ã¦ã€authã«æ–°è¦ç™»éŒ²ã—ã¦ã€ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã“ã¨ã¨cloud firestoreã«ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’æ ¼ç´ã™ã‚‹ã¾ã§ã‚’å®Ÿè£…ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ï¼
**å‰å›ã®è¨˜äº‹**
å‰ç·¨ chakra-uiÃ—react-hook-formç·¨

https://zenn.dev/ko_hei/articles/28e7709e187c0a

**ä¸­ç·¨ firebase authenticationç·¨** â†ä»Šå›ã®è¨˜äº‹ã§ã™
å¾Œç·¨ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒˆãƒªã‚¬ãƒ¼ç·¨

ä½¿ç”¨ã™ã‚‹æŠ€è¡“ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

- Next.js
- chakra-ui
- react-hook-form
- firebase
  - authentication
  - cloud firestore
  - cloud functions

# firebaseã®åˆæœŸè¨­å®š
å‰å›ã¾ã§ã§ã€ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢ã€ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢ã®ç”»é¢ã®å®Ÿè£…ã¾ã§ã‚’çµ‚ãˆã¦ã„ã¾ã™ã€‚
æœ¬è¨˜äº‹ã§ã¯firebaseã¨ã®æ¥ç¶šã‚’è¨­å®šã—ã¦ã„ãã¾ã™ã€‚ã“ã®ç« ã§ã¯ã€firebaseã®æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã¨ã€åˆæœŸè¨­å®šã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚
ã¾ãšã¯ã€firebaseã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã€æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚

https://firebase.google.com/?hl=ja

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’`auth-form`ã¨ã—ã¦ä½œæˆã—ã¾ã™ï¼ˆåå‰ã¯ä»»æ„ã§æ§‹ã„ã¾ã›ã‚“ï¼‰
ã€Œç¶šè¡Œã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ä¸‹ã—ã¦ã€æ¬¡ã®ç”»é¢ã«é·ç§»ã—ã¾ã™ã€‚
æ¬¡ã®ç”»é¢ä»¥é™ã¯ã€åˆæœŸçŠ¶æ…‹ã§ã€Œç¶šè¡Œã€ã€è‡ªèº«ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é¸æŠã—ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ–°è¦ä½œæˆã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/73c88d84adce-20230903.png)


### 2. webã‚¢ãƒ—ãƒªã®ç™»éŒ²
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚ŒãŸã‚‰ã€æ¬¡ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
æ¬¡ã«ã€firebaseã‚’ä½¿ç”¨ã™ã‚‹webã‚¢ãƒ—ãƒªã®ç™»éŒ²ã‚’è¡Œã„ã¾ã™ã€‚
ç”»åƒã®èµ¤æ ã§å›²ã¾ã‚Œã¦ã„ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã‚’æŠ¼ä¸‹ã—ã¦webã‚¢ãƒ—ãƒªã‚’ç™»éŒ²ã—ã¦ã„ãã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/e403c387d08b-20230903.png)
ã‚¢ãƒ—ãƒªåã‚’å…¥åŠ›ã—ã¦ã€Œã‚¢ãƒ—ãƒªã‚’ç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚
â€»Hostingã«ã¤ã„ã¦ä»Šå›ã¯ã€ãƒã‚§ãƒƒã‚¯ã‚’ã¤ã‘ã¦ã„ã¾ã›ã‚“ãŒã€ä»Šå¾Œåˆ©ç”¨ã™ã‚‹äºˆå®šãŒã‚ã‚Œã°ã€ãƒã‚§ãƒƒã‚¯ã‚’ã¤ã‘ã¦ãã ã•ã„
![](https://storage.googleapis.com/zenn-user-upload/834266956962-20230903.png)
ç™»éŒ²ã™ã‚‹ã¨ã€Firebase SDKãŒè¡¨ç¤ºã•ã‚Œã€`npm install`ã‚³ãƒãƒ³ãƒ‰ã¨æ¥ç¶šã«å¿…è¦ãª`key`ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚
ã“ã®`key`ã¯Next.jsã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨firebaseã®æ¥ç¶šã§ä½¿ç”¨ã—ã¾ã™ã€‚ä»–äººã«çŸ¥ã‚‰ã‚Œã¦ã—ã¾ã†ã¨æ‚ªç”¨ã•ã‚ŒãŸã‚Šã€ç¬¬ä¸‰è€…ãŒfirebaseã«æ¥ç¶šã§ãã¦ã—ã¾ã†ã®ã§ã€æ‰±ã„ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ï¼

### 3. Authenticationã®æœ‰åŠ¹åŒ–
ãã‚Œã§ã¯æ¬¡ã«ã€firebase authenticationã‚’æœ‰åŠ¹åŒ–ã—ã€ä»Šå›ã€Emailï¼Passwordèªè¨¼ã‚’ä½¿ã£ã¦å®Ÿè£…ã—ã¦ã„ãã®ã§ã€èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æœ‰åŠ¹åŒ–ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚
authenticationã¯ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ã€Œæ§‹ç¯‰ã€ã‚¿ãƒ–ã«ã‚ã‚‹ã®ã§ã€æŠ¼ä¸‹ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/7a58a1b10f5c-20230903.png)
ã€Œå§‹ã‚ã‚‹ã€ãƒœã‚¿ãƒ³ã§authenticationã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/a728f106e4a4-20230903.png)
ã€Œãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ã‚’é¸æŠã—ã¦ã€æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚
â€»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—ã§ãƒ­ã‚°ã‚¤ãƒ³ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ç„¡åŠ¹ã®çŠ¶æ…‹ã«ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚
![](https://storage.googleapis.com/zenn-user-upload/8ba8ad0a24ff-20230903.png)

![](https://storage.googleapis.com/zenn-user-upload/c53b6f65326c-20230903.png)

ã“ã‚Œã§ã€firebaseå´ã®authenticationã®è¨­å®šã¯å®Œäº†ã§ã™ï¼

# Next.jsã¨firebaseã®æ¥ç¶š
æ¬¡ã¯ã€è¨­å®šã—ãŸfirebaseã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’Next.jsã§ã‚‚ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã‚’ã—ã¦ã„ãã¾ã™ã€‚
ã¾ãšã¯ã€firebaseã§ç”Ÿæˆã—ãŸ`key`ã‚’Next.jsã§ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦å€¤ã‚’æ ¼ç´ã—ã¦ãŠãã¾ã™ã€‚

### 1. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
firebaseã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚„å‹ã‚’ã‚’Next.jsã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã€ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
```
npm install firebase
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æœ€ä¸Šå±¤ã«`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚
```:.env
# firebase
NEXT_PUBLIC_FIREBASE_API_KEY='è‡ªèº«ã®firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®apiKey'
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN='è‡ªèº«ã®firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®authDomain'
NEXT_PUBLIC_FIREBASE_PROJECT_ID='è‡ªèº«ã®firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®projectId'
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET='è‡ªèº«ã®firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®storageBucket'
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID='è‡ªèº«ã®firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®messagingSenderId'
NEXT_PUBLIC_FIREBASE_APP_ID='è‡ªèº«ã®firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®appId'
```

### 2. firebase config
ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ãŒã§ããŸã®ã§ã€firebaseã®åˆæœŸåŒ–ã‚’ã—ã¦ã„ãã¾ã™ï¼ä¸‹è¨˜ã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã§å®Ÿè£…ã—ã¾ã™ã€‚
```
src
 â”œ app
 â”œ common
 â”” lib
     â”” firebase
         â”œ apis
         â”‚  â”œ auth.ts 
         â”‚  â”” user.ts
         â”” config.ts
```

firebaseã®åˆæœŸåŒ–ã¯`config.ts`ã§è¨­å®šã—ã¾ã™
```typescript: config.ts
import { initializeApp } from 'firebase/app'
import { getAuth } from 'firebase/auth'
import { getFirestore } from 'firebase/firestore'

export const firebaseConfig = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,
  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,
  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,
}

const app = initializeApp(firebaseConfig)
export const auth = getAuth(app)
export const db = getFirestore(app)
```

ã“ã‚Œã§ã€firebaseã¨Next.jsã®æ¥ç¶šã®æ‰‹é †ãŒå®Œäº†ã—ã¾ã—ãŸã€‚
æ­£å¸¸ã«authã«ç™»éŒ²ã•ã‚Œã‚‹ã‹ã©ã†ã‹ç¢ºã‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

# ãƒ•ã‚©ãƒ¼ãƒ ã¨firebaseã®æ¥ç¶š
å®Ÿéš›ã«ã€authã«ãƒ¦ãƒ¼ã‚¶ã‚’ç™»éŒ²ã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚
```
src
 â”œ app
 â”œ common
 â”” lib
     â”” firebase
         â”œ apis
         â”‚  â”œ auth.ts //â†ã“ã“ã«å®Ÿè£…
         â”‚  â”” user.ts
         â”” config.ts
```
Emailï¼Passwordã®èªè¨¼ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãã‚Œãã‚Œå®£è¨€ã—ã¾ã™ã€‚ï¼ˆãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã‚‚ä¸€å¿œå®£è¨€ã—ã¦ãŠãã¾ã™ã€‚ï¼‰
```typescript
import {
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  signOut,
} from 'firebase/auth'

import { auth } from '@/lib/firebase/config'

/**
 * Emailã¨Passwordã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³
 * @param email
 * @param password
 * @returns Promise<boolean>
 */
export const signInWithEmail = async (args: {
  email: string
  password: string
}): Promise<boolean> => {
  let result: boolean = false
  try {
    const user = await signInWithEmailAndPassword(
      auth,
      args.email,
      args.password
    )

    if (user) {
      result = true
    }
  } catch (error) {
    result = false
    console.log(error)
  }
  return result
}

/**
 * Emailã¨Passwordã§ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—
 * @param username
 * @param email
 * @param password
 * @returns Promise<boolean>
 */
export const signUpWithEmail = async (args: {
  email: string
  password: string
}): Promise<boolean> => {
  let result: boolean = false
  try {
    const user = await createUserWithEmailAndPassword(
      auth,
      args.email,
      args.password
    )
    if (user) {
      result = true
    }
  } catch (error) {
    result = false
    console.log(error)
  }
  return result
}

/**
 * ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
 * @returns Promise<boolean>
 */
export const logout = async (): Promise<boolean> => {
  let result: boolean = false

  await signOut(auth)
    .then(() => {
      result = true
    })
    .catch((error) => {
      console.log(error)
      result = false
    })

  return result
}
```

authå‡¦ç†ãŒå®Ÿè£…ã§ããŸã‚‰ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã§å…¥åŠ›ã•ã‚ŒãŸå€¤ã‚’ä½¿ã£ã¦ã€authå‡¦ç†ã‚’å‘¼ã³å‡ºã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚
```typescript: signin/page.tsx
..çœç•¥..
/** ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢
 * @screenname SignInScreen
 * @description ãƒ¦ãƒ¼ã‚¶ã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã‚’è¡Œã†ç”»é¢
 */
export default function SignInScreen() {
  const { handleSubmit, register } = useForm<formInputs>()

  const [show, setShow] = useState<boolean>(false)

  const onSubmit = handleSubmit(async (data) => {
    /** ã“ã“ã‹ã‚‰å‡¦ç†è¿½åŠ  */
    signInWithEmail({ email: data.email, password: data.password }).then(
      (res: boolean) => {
        if (res) {
          console.log('ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ')
        } else {
          console.log('ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—')
        }
      }
    )
  })
  return (..çœç•¥..)
}
```
ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã—ãŸã‚‰ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã€Œãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã€ã€å¤±æ•—ã—ãŸã‚‰ã€ã€Œãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—ã€ã®æ–‡è¨€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
ç¶šã„ã¦ã€ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢ã«å‡¦ç†ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚
```typescript: signup/page.tsx
..çœç•¥..
/** ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢
 * @screenname SignUpScreen
 * @description ãƒ¦ãƒ¼ã‚¶ã®æ–°è¦ç™»éŒ²ã‚’è¡Œã†ç”»é¢
 */
export default function SignUpScreen() {
  const { handleSubmit, register } = useForm<formInputs>()

  const [password, setPassword] = useState(false)
  const [confirm, setConfirm] = useState(false)

  const onSubmit = handleSubmit(async (data) => {
    /** ã“ã“ã‹ã‚‰å‡¦ç†è¿½åŠ  */
    signUpWithEmail({ email: data.email, password: data.password }).then(
      (res: boolean) => {
        if (res) {
          console.log('æ–°è¦ç™»éŒ²æˆåŠŸ')
        } else {
          console.log('æ–°è¦ç™»éŒ²å¤±æ•—')
        }
      }
    )
  })

  const passwordClick = () => setPassword(!password)
  const confirmClick = () => setConfirm(!confirm)

  return (..çœç•¥..)
}

```
ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ã§ã‚‚ã€åŒæ§˜ã«`onSubmit`ãƒ¡ã‚½ãƒƒãƒ‰ã§æ–°è¦ç™»éŒ²å‡¦ç†ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚
ã“ã‚Œã§ã€ãƒ•ã‚©ãƒ¼ãƒ ã¨firebaseã®authå‡¦ç†ã¨ã®æ¥ç¶šãŒã§ãã¾ã—ãŸï¼
å®Ÿéš›ã«ç”»é¢ã‚’æ“ä½œã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãŒæ–°è¦ç™»éŒ²ã•ã‚Œã‚‹ã‹ã€ãã—ã¦ã€ä½œæˆã—ãŸãƒ¦ãƒ¼ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã‹ã‚’ç¢ºã‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ï¼
:::message alert
firebaseã‚’npm installã™ã‚‹ã¨ã€`Module not found: Can't resolve 'encoding' ...`ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã•ã‚Œãªã„æ–¹ã¯ãã®ã¾ã¾ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æ–¹ã¯`npm i -D encoding`ã‚’ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã—ã¦ã¿ã¦ãã ã•ã„ï¼
:::
ä¸‹è¨˜ã®å…¥åŠ›æƒ…å ±ã§ã€æ–°è¦ä½œæˆã‚’å®Ÿæ–½ã—ã¦ã¿ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/41dc4372d5fe-20230903.png)
ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã€Œæ–°è¦ç™»éŒ²æˆåŠŸã€ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ï¼â€»2å›æŠ¼ã—ã¡ã‚ƒã£ã¦ã‚“ã§ã€2å›ç›®ã¯ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/9eff7ec9c4c1-20230903.png)
firebase consoleã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ï¼ãƒ¦ãƒ¼ã‚¶ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼
![](https://storage.googleapis.com/zenn-user-upload/19fb8b1a2f9c-20230903.png)

ã“ã‚Œã§firebase authenticationã«ãƒ¦ãƒ¼ã‚¶ç™»éŒ²å®Œäº†ã§ã™ï¼
ã§ã¯ã€è¿½åŠ ã•ã‚ŒãŸå¾Œã«ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’cloud firestoreã«æ ¼ç´ã™ã‚‹å‡¦ç†ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ï¼
ã¾ãšã¯ã€firestoreã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ï¼ã€Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆã€ã‹ã‚‰ã€æœ¬ç•ªç’°å¢ƒã€åœ°åŸŸã‚’æ±äº¬ã§é¸æŠã—ã¦firestoreã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™
![](https://storage.googleapis.com/zenn-user-upload/334dba9485ad-20230903.png)

firestoreã¯åˆæœŸè¨­å®šã§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã®è¨­å®šã§ã€æ¨©é™ãŒãªã„çŠ¶æ…‹ã«ã‚ã‚‹ã®ã§ã€ã¾ãšã¯ã€ãƒ•ãƒ«æ¨©é™ã§è¨­å®šã—ã¦ãŠãã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/f8ec2042c6af-20230903.png)

ã“ã“ã¾ã§è¨­å®šã§ããŸã‚‰ã€ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†ã«ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ï¼
```typescript: apis/auth.tsx
/**
 * Emailã¨Passwordã§ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—
 * @param username
 * @param email
 * @param password
 * @returns Promise<boolean>
 */
export const signUpWithEmail = async (args: {
  email: string
  password: string
}): Promise<boolean> => {
  let result: boolean = false
  try {
    const user = await createUserWithEmailAndPassword(
      auth,
      args.email,
      args.password
    ).then(async (userCredential) => {
      /** thenã‹ã‚‰è¿½åŠ ã—ã¾ã™ */
      /** cloud firestoreã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ */
      const colRef = doc(db, 'users', userCredential.user.uid)
      /** documentè¿½åŠ  */
      await setDoc(colRef, {
        uid: userCredential.user.uid,
        email: userCredential.user.email,
      })
      return userCredential.user
    })
    if (user) {
      result = true
    }
  } catch (error) {
    result = false
    console.log(error)
  }
  return result
}
```
åˆ¥ãƒ¦ãƒ¼ã‚¶ã®æƒ…å ±ã§ã€å†åº¦æ–°è¦ç™»éŒ²ã—ã¦ã¿ã¾ã™
![](https://storage.googleapis.com/zenn-user-upload/115579d5b18e-20230903.png)

ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã€authenticationã€firestoreã§ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼
### ã‚³ãƒ³ã‚½ãƒ¼ãƒ«
![](https://storage.googleapis.com/zenn-user-upload/a450f6bedbbe-20230903.png)

### authentication
![](https://storage.googleapis.com/zenn-user-upload/984909c9c88e-20230903.png)

### firestore
![](https://storage.googleapis.com/zenn-user-upload/9a8832510021-20230903.png)

å…¨ã¦æ–°è¦ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ã­ï¼ã“ã‚Œã§ã€æ–°è¦ä½œæˆå‡¦ç†ã¯å®Œäº†ã§ã™ï¼æ¬¡ã¯ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã‚’ç¢ºèªã—ã¦ã¾ã—ã‚‡ã†ï¼

# ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
ä¸‹è¨˜ã®æƒ…å ±ã§ãƒ•ã‚©ãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/6d9cad564369-20230903.png)
ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã€Œãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã€ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼ã“ã‚Œã§å®Œäº†ã§ã™ï¼
![](https://storage.googleapis.com/zenn-user-upload/14ed26a13b00-20230903.png)

# ãŠã‚ã‚Šã«
ã“ã‚Œã§ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ã®æ–°è¦ç™»éŒ²ã€ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã¾ã§ã®æµã‚Œã‚’å®Ÿè£…ã§ãã¾ã—ãŸï¼
authå‘¨ã‚Šã®æœ€ä½é™ã®æ©Ÿèƒ½ã¯ã“ã‚Œã§å…¨ã¦ã«ãªã‚Šã¾ã™ï¼ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã«ã¤ã„ã¦ã‚‚ã€å‡¦ç†è‡ªä½“ã¯æ²è¼‰ã—ã¦ã„ã‚‹ã®ã§ã€ãƒœã‚¿ãƒ³ã‚’é…ç½®ã—ã¦ã€å‡¦ç†ã‚’å‘¼ã³å‡ºã›ã°ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
å¾Œç·¨ã§ã¯ã€authã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚„ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã«ã¤ã„ã¦å®Ÿè£…ã€èª¬æ˜ã—ã¦ã„ãã¾ã™ï¼

æœ€å¾Œã¾ã§èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼